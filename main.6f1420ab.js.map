{"version":3,"sources":["scripts/main.js"],"names":["thead","document","querySelector","tbody","validScheme","name","value","length","age","salary","body","insertAdjacentHTML","special","form","forms","select","createRow","firstField","secondField","position","thirdField","fourthField","format","parseFloat","toLocaleString","showNotification","type","title","text","toUpperCase","notification","classList","add","setTimeout","remove","addEventListener","e","validity","valid","setCustomValidity","trim","preventDefault","target","reset","removeAttribute","parentElement","item","targetCell","cellIndex","prevValue","innerText","normValue","replace","targetInput","querySelectorAll","cloneNode","firstChild","replaceWith","focus","eventKey","key","blur","eventBlur","removeChild","toLowerCase","numb","textContent","toggleSwitch","data","children","sort","a","b","contentA","cells","contentB","localeCompare","parseInt","slice","reverse","forEach","elem","i","innerHTML","append"],"mappings":"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","file":"main.6f1420ab.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nconst thead = document.querySelector('thead');\nconst tbody = document.querySelector('tbody');\n\nconst validScheme = {\n  name: (value) => value.length > 4,\n  age: (value) => value > 18 || value < 90,\n  salary: (value) => `$${value}`,\n};\n\ndocument.body.insertAdjacentHTML('beforeend', `\n  <form action=\"/\" method=\"get\" class=\"new-employee-form\">\n    <label>\n      Name:\n      <input\n        name=\"name\"\n        type=\"text\"\n        data-qa=\"name\"\n        minlength=\"4\"\n        required\n      >\n    </label>\n    <label>\n      Position:\n      <input name=\"position\" type=\"text\" data-qa=\"position\" required>\n    </label>\n    <label for=\"office\">\n      Office:\n      <select id=\"office\" data-qa=\"office\" required>\n        <option value=\"Tokyo\">Tokyo</option>\n        <option value=\"Singapore\">Singapore</option>\n        <option value=\"London\">London</option>\n        <option value=\"New York\">New York</option>\n        <option value=\"Edinburgh\">Edinburgh</option>\n        <option value=\"San Francisco\">San Francisco</option>\n      </select>\n    </label>\n    <label>\n      Age:\n      <input name=\"age\" type=\"number\" data-qa=\"age\" required min=\"18\" max=\"90\">\n    </label>\n    <label>\n      Salary:\n      <input name=\"salary\" type=\"number\" data-qa=\"salary\" required>\n    </label>\n    <button type=\"submit\"> Save to table </button>\n  </form>\n`);\n\nconst form = document.forms[0];\nconst select = form.querySelector('[data-qa=\"office\"]');\n\nconst createRow = (...arg) => {\n  const firstField = form.name.value;\n  const secondField = form.position.value;\n  const thirdField = select.value;\n  const fourthField = form.age.value;\n  const fifthField = parseFloat(form.salary.value);\n  const format = fifthField.toLocaleString('en-US');\n\n  tbody.insertAdjacentHTML('beforeend', `\n    <tr>\n      <td>${firstField}</td>\n      <td>${secondField}</td>\n      <td>${thirdField}</td>\n      <td>${fourthField}</td>\n      <td>$${format}</td>\n    </tr>\n  `);\n};\n\nfunction showNotification(type, title, text) {\n  form.insertAdjacentHTML('afterend', `\n    <div class=\"notification\" data-qa=\"notification\">\n      <h1 class=\"title\">${title.toUpperCase()}</h1>\n      <p>${text}</p>\n    </div>\n  `);\n\n  const notification = document.querySelector('.notification');\n\n  notification.classList.add(type);\n\n  setTimeout(() => {\n    notification.remove();\n  }, 3000);\n}\n\nform.name.addEventListener('submit', e => {\n  if (!form.name.validity.valid) {\n    form.name.setCustomValidity(\n      'Error! Less 4 letters are entered in the field'\n    );\n  }\n});\n\nform.name.addEventListener('change', e => {\n  if (!form.name.validity.valid || !form.name.value.trim()) {\n    showNotification(\n      'error', 'Incorrect name', 'Name length should be at least 4 letters'\n    );\n  }\n});\n\nform.age.addEventListener('submit', e => {\n  if (!form.age.validity.valid || !form.name.value.trim()) {\n    form.age.setCustomValidity(\n      'Error! Your age must be from 18 to 90 years'\n    );\n  }\n});\n\nform.age.addEventListener('change', e => {\n  if (!form.age.validity.valid) {\n    showNotification(\n      'error', 'Enter a correct age', 'Your age must be from 18 to 90 years'\n    );\n  }\n});\n\nform.addEventListener('submit', (e) => {\n  e.preventDefault();\n\n  if (form.name.value.trim()) {\n    createRow();\n\n    showNotification(\n      'success',\n      'Successful!',\n      'New employee is successfully added to the table'\n    );\n  }\n\n  e.target.reset();\n});\n\nlet special;\n\ntbody.addEventListener('click', (e) => {\n  if (special) {\n    special.classList.remove('active');\n    special.removeAttribute('class');\n  }\n\n  special = e.target.parentElement;\n  e.target.parentElement.classList.add('active');\n});\n\ntbody.addEventListener('dblclick', (e) => {\n  const item = e.target;\n  const targetCell = item.cellIndex;\n  const prevValue = item.innerText;\n  const normValue = prevValue.replace(/[$,]/g, '');\n  const targetInput\n    = form.querySelectorAll('[data-qa]')[targetCell].cloneNode(true);\n\n  targetInput.classList.add('cell-input');\n  targetInput.value = normValue;\n  item.firstChild.replaceWith(targetInput);\n  targetInput.focus();\n\n  targetInput.addEventListener('keypress', eventKey => {\n    if (eventKey.key === 'Enter') {\n      targetInput.blur();\n    }\n  });\n\n  targetInput.addEventListener('blur', eventBlur => {\n    if (validScheme.name(targetInput.value)\n      || validScheme.age(targetInput.value)\n      || validScheme.salary(targetInput.value)\n      || !targetInput.value.trim()) {\n      item.removeChild(targetInput);\n\n      if (targetInput.value.toLowerCase() === targetInput.value.toUpperCase()\n        && targetInput.value.length > 2) {\n        const numb = +targetInput.value;\n\n        item.textContent = `$${numb.toLocaleString('en-US')}`;\n      } else {\n        item.textContent = targetInput.value;\n      }\n\n      return;\n    }\n\n    item.removeChild(targetInput);\n    item.textContent = prevValue;\n  });\n});\n\nlet toggleSwitch = true;\n\nthead.addEventListener('click', (e) => {\n  const item = e.target;\n  const cellIndex = item.cellIndex;\n\n  let data = [...tbody.children];\n\n  data.sort((a, b) => {\n    const contentA = a.cells[cellIndex].textContent;\n    const contentB = b.cells[cellIndex].textContent;\n\n    if (contentA.toUpperCase() !== contentA.toLowerCase()) {\n      return contentA.localeCompare(contentB);\n    }\n\n    if (parseInt(contentA)) {\n      return contentA - contentB;\n    } else {\n      return parseInt(contentA.slice(1)) - parseInt(contentB.slice(1));\n    }\n  });\n\n  if (!toggleSwitch) {\n    data = data.reverse();\n  }\n\n  toggleSwitch = !toggleSwitch;\n\n  data.forEach((elem, i) => {\n    elem.innerHTML = data[i].innerHTML;\n  });\n\n  tbody.append(...data);\n});\n"]}